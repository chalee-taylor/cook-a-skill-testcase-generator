# TC_UNSPLASH_F7_LIKE_SAVE_PHOTOS.md â€” Test Cases: Like / Save Photos

**Generated by:** Test Case Generator Skill v1.1.0
**Source Spec:** SPEC_UNSPLASH.md â€” Feature 7
**Feature:** Like / Save Photos
**Coverage Level:** full
**Enable Security:** true
**Generated At:** 2026-02-27
**Output Format:** markdown

---

## Pre-run Report

### Step 0 â€” PII Masking

Scanned spec for PII patterns. No real PII found. All references are synthetic test data.

**PII Masking Report:** Fields redacted: 0

---

### Intelligence Scan Report â€” Like / Save Photos

#### Feature Identified
- **Type:** Toggle Action (Like/Unlike) + Notification + Auth Gate
- **Name:** Like / Save Photos
- **Language:** English

#### Business Rules Extracted

Total: **7 rules**

| ID | Rule Summary |
|---|---|
| BR-061 | Only authenticated users can like a photo |
| BR-062 | Any photo (free or Unsplash+) can be liked â€” no subscription needed |
| BR-063 | Like button toggles: click once = like, click again = unlike |
| BR-064 | Photo contributor receives notification when photo is liked |
| BR-065 | Liked photos appear in user's profile "Likes" tab (public by default) |
| BR-066 | Like count on each photo is publicly displayed |
| BR-067 | Unlike action does NOT notify the contributor |

#### User Flows Detected

Total: **3 flows**

1. Happy Path â€” Like (5 steps)
2. Alternative Flow â€” Unlike (3 steps)
3. Alternative Flow â€” Unauthenticated User (3 steps)

#### Risk Areas Flagged

| Risk Category | Detected? | Evidence |
|---|---|---|
| Authentication / Auth | **Yes** | Only authenticated users can like; guest prompt on click |
| Input Validation | No | â€” |
| File Upload | No | â€” |
| Payment Processing | No | â€” |
| External API / Service | No | â€” |
| PII / Sensitive Data | No | â€” |
| Rate Limiting | No | â€” |
| Permissions / Roles | **Yes** | Guest vs. Registered User; IDOR risk on like actions |

#### Spec Quality Assessment
- **Confidence: High**
- Has user flow: Yes
- Has business rules: Yes
- Has validation conditions: Yes
- Missing elements: None critical

#### Coverage Recommendation
- **Recommended: `full`** â€” Auth gate, toggle idempotency, race conditions, and IDOR risk

#### Estimated Output
- Estimated TC count: ~18 TCs
- Traceability matrix: included

#### Spec Gaps Detected

| Gap Type | Detected? | Impact |
|---|---|---|
| No failure/error scenarios | Partial | Notification failure scenario not described |
| No boundary conditions in rules | No | â€” |
| Vague expected behavior | Partial | BR-064: "contributor notified" â€” notification channel/format not described |
| External dependency unspecified | No | â€” |
| No roles or permissions defined | No | â€” |
| Contradictory rules | No | â€” |
| Only happy path described | No | â€” |

---

## Test Cases â€” Like / Save Photos

### ðŸŸ¢ Happy Path

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-001 | Authenticated user likes a photo â€” count increments and heart fills | Happy Path | P1 - Critical | BR-061, BR-063, BR-064, BR-065, BR-066 | User liker@test.com is logged in. Photo "photo001" has like count = 42. Heart icon is hollow. | photo_id: photo001 / user_role: Registered User | 1. Log in as liker@test.com 2. Navigate to Photo Detail for photo001 3. Click the heart (like) icon | Like count increments to 43. Heart icon changes from hollow to filled (red). Photo appears in liker@test.com's "Likes" tab on profile. Contributor of photo001 receives a notification. |
| TC-002 | Authenticated user unlikes a previously liked photo â€” count decrements and heart hollows | Happy Path | P1 - Critical | BR-063, BR-066, BR-067 | User liker@test.com is logged in. Photo "photo001" already liked by liker@test.com. Like count = 43. Heart icon is filled. | photo_id: photo001 / action: unlike | 1. Log in as liker@test.com 2. Navigate to Photo Detail for photo001 3. Click the filled heart icon again | Like count decrements to 42. Heart icon changes to hollow. Photo is removed from liker@test.com's "Likes" tab. Contributor receives NO notification for the unlike. |
| TC-003 | Liked photos appear in user's profile Likes tab | Happy Path | P2 - High | BR-065 | User liker@test.com is logged in. Photo "photo002" has been liked by liker@test.com. | â€” | 1. Log in as liker@test.com 2. Navigate to liker@test.com's profile 3. Click the "Likes" tab | Photo002 appears in the Likes tab grid. The Likes tab is publicly visible. |
| TC-004 | Guest clicking the like icon sees login/signup prompt | Happy Path | P1 - Critical | BR-061 | No active session. Photo Detail page for "photo001" is open. | user_role: Guest | 1. Navigate to Photo Detail for photo001 (no login) 2. Click the heart icon | Prompt/modal displayed: "Sign up to like this photo". No like is recorded. Like count does not change. |

### ðŸ”´ Negative

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-005 | Liking an already-liked photo is idempotent (no double-like) | Negative | P2 - High | BR-063 | User liker@test.com is logged in. Photo "photo001" already liked by liker@test.com. Count = 43. | photo_id: photo001 | 1. Log in as liker@test.com 2. Navigate to Photo Detail for photo001 (heart already filled) 3. Attempt to like again (click filled heart) | System ignores or treats as unlike. Count either stays at 43 (no double-like) or decrements to 42 (toggle). Like count is never 44 (no duplicate like allowed). |
| TC-006 | Unlike does not send notification to contributor | Negative | P2 - High | BR-067 | User liker@test.com is logged in. Photo "photo001" was liked by liker@test.com. | photo_id: photo001 | 1. Log in as liker@test.com 2. Navigate to photo001 (heart filled) 3. Click heart to unlike | Like removed. Contributor's notification inbox receives NO new notification for the unlike action. Like count decrements. |

### ðŸŸ¡ Edge Cases

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-007 | Like state persists after logout and re-login | Edge Case | P2 - High | BR-063, BR-065 | User liker@test.com has liked photo "photo001". | â€” | 1. Log in as liker@test.com 2. Like photo001 (heart fills) 3. Log out 4. Log back in as liker@test.com 5. Navigate to photo001 | Heart icon is still filled (liked state preserved). Photo still appears in Likes tab. |
| TC-008 | Rapid like/unlike toggle (double-click) results in accurate final state | Edge Case | P1 - Critical | BR-063, BR-066 | User liker@test.com is logged in. Photo "photo001" is not liked. Count = 42. | â€” | 1. Log in as liker@test.com 2. Navigate to photo001 3. Rapidly click the heart icon twice in quick succession | Final state is either liked (count = 43) or not liked (count = 42). No race condition causes count = 44. Count is accurate and stable. |
| TC-009 | User can like their own uploaded photo | Edge Case | P3 - Medium | BR-061, BR-062 | User contributor@test.com is logged in. contributor@test.com has uploaded photo "myPhoto". | photo_id: myPhoto | 1. Log in as contributor@test.com 2. Navigate to myPhoto 3. Click the heart icon | Like added. Count increments. No self-notification sent to contributor@test.com (per BR-064 context â€” self-likes should not notify). |
| TC-010 | Photo deleted after user liked it â€” removed from Likes tab | Edge Case | P2 - High | BR-065 | User liker@test.com has liked photo "photo003". Photo "photo003" is then deleted by contributor. | photo_id: photo003 | 1. Log in as liker@test.com 2. Navigate to Likes tab on profile 3. Observe photo003 | Deleted photo is no longer visible in Likes tab. No broken image link or 404 shown within the Likes tab. |
| TC-011 | Guest navigates directly to a liked photo URL â€” no like state shown | Edge Case | P3 - Medium | BR-061 | No active session. Photo "photo001" has been liked by various users. | URL: https://unsplash.com/photos/photo001 | 1. Without logging in, navigate to the URL for photo001 | Heart icon is visible but hollow (no liked state shown for guest). Clicking heart triggers the login/signup prompt. |
| TC-012 | Like count on photo is publicly visible without login | Edge Case | P2 - High | BR-066 | No active session. Photo "photo001" has like count = 43. | â€” | 1. Navigate to Photo Detail for photo001 (no login) | Like count (43) is publicly visible next to the heart icon. No login required to view the count. |
| TC-013 | Unsplash+ premium photo can be liked without subscription | Edge Case | P2 - High | BR-062 | User liker@test.com is logged in with no Unsplash+ subscription. | photo_id: prem001 (premium photo) | 1. Log in as liker@test.com (no subscription) 2. Navigate to premium photo prem001 3. Click the heart icon | Like is added. Count increments. Heart fills. No subscription required to like a photo. |

### ðŸ”’ Security

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-014 | Unauthenticated API request to like endpoint returns 401 | Security | P1 - Critical | BR-061 | No active session/auth token. | POST /photos/photo001/likes with no auth header | 1. Send POST request to like endpoint without an auth token | Server returns HTTP 401 Unauthorized. Like is not recorded. Like count unchanged. |
| TC-015 | IDOR â€” user cannot like a photo on behalf of another user | Security | P1 - Critical | BR-061 | User attacker@test.com is logged in. | Attempt to POST like with user_id of victim@test.com | 1. Log in as attacker@test.com 2. Intercept like request for a photo 3. Modify the user_id field in request body to victim@test.com's ID 4. Send modified request | Server ignores the user_id in body and uses the authenticated session's identity. Like is recorded for attacker@test.com, not victim@test.com. Server returns 403 if explicit user_id override is detected. |
| TC-016 | CSRF â€” like action without valid CSRF token is rejected | Security | P1 - Critical | BR-061 | User liker@test.com is logged in. | POST request to like endpoint with missing/invalid CSRF token | 1. Capture a valid like request in DevTools 2. Replay the request with CSRF token removed or modified | Server returns 403 Forbidden. Like is not recorded. CSRF protection is enforced on state-changing POST actions. |
| TC-017 | Like count cannot be artificially inflated by replaying request | Security | P2 - High | BR-066 | User liker@test.com is logged in. Photo "photo001" not liked. | Replay POST like request for photo001 multiple times | 1. Send POST like request for photo001 2. Replay the same request 5 more times | Like count increments only once. Server enforces one-like-per-user rule. Duplicate requests are idempotent (no double-counting). |
| TC-018 | Photo ID manipulation in like request does not like a different user's private photo | Security | P1 - Critical | BR-061 | User liker@test.com is logged in. | POST like with photo_id of a private/unlisted photo | 1. Intercept like request for a public photo 2. Modify photo_id to a private/unlisted photo's ID 3. Send modified request | Server returns 404 or 403 if photo is private. Private photo is not liked without permission. Private photo does not appear in liker@test.com's Likes tab. |

---

## Traceability Matrix

| Rule ID | Rule Description | Covered By | Status |
|---|---|---|---|
| BR-061 | Only authenticated users can like | TC-001, TC-004, TC-014, TC-015, TC-016, TC-018 | âœ… Covered |
| BR-062 | Any photo likeable without subscription | TC-001, TC-013 | âœ… Covered |
| BR-063 | Like toggles (like / unlike) | TC-001, TC-002, TC-005, TC-007, TC-008 | âœ… Covered |
| BR-064 | Contributor notified on like | TC-001 | âœ… Covered |
| BR-065 | Liked photos in profile Likes tab | TC-003, TC-007, TC-010 | âœ… Covered |
| BR-066 | Like count publicly displayed | TC-001, TC-012, TC-017 | âœ… Covered |
| BR-067 | Unlike does not notify contributor | TC-002, TC-006 | âœ… Covered |

---

## Coverage Summary

| Type | Count |
|---|---|
| ðŸŸ¢ Happy Path | 4 |
| ðŸ”´ Negative | 2 |
| ðŸŸ¡ Edge Case | 7 |
| ðŸ”’ Security | 5 |
| **Total** | **18** |

**Rule Coverage:** 7 / 7 rules = **100%**

---

## Test Execution Report

```
Feature:      Like / Save Photos
Source Spec:  SPEC_UNSPLASH.md â€” Feature 7
Tester:       ___________
Date:         ___________
Environment:  ___________
Build/Version:___________

| Total TCs | Pass | Fail | Blocked | Not Run |
|-----------|------|------|---------|---------|
|    18     |      |      |         |         |

Defects Found:
| Bug ID | TC ID | Rule Ref | Description | Severity | Status |
|--------|-------|----------|-------------|----------|--------|
|        |       |          |             |          |        |

Sign-off:
[ ] QC Lead Review: ___________
[ ] Security Review (if applicable): ___________
[ ] Ready for Release
```
