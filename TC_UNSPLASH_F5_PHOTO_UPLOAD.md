# TC_UNSPLASH_F5_PHOTO_UPLOAD.md ‚Äî Test Cases: Photo Upload (Contributors)

**Generated by:** Test Case Generator Skill v1.1.0
**Source Spec:** SPEC_UNSPLASH.md ‚Äî Feature 5
**Feature:** Photo Upload (Contributors)
**Coverage Level:** full
**Enable Security:** true
**Generated At:** 2026-02-27
**Output Format:** markdown

---

## Pre-run Report

### Step 0 ‚Äî PII Masking

Scanned spec for PII patterns. No real PII found. References are synthetic test data.

**PII Masking Report:** Fields redacted: 0

---

### Intelligence Scan Report ‚Äî Photo Upload (Contributors)

#### Feature Identified
- **Type:** File Upload + Admin Review Workflow
- **Name:** Photo Upload (Contributors)
- **Language:** English

#### Business Rules Extracted

Total: **13 rules**

| ID | Rule Summary |
|---|---|
| BR-036 | Only registered (authenticated) users can upload photos |
| BR-037 | Minimum resolution: 5 megapixels (‚â• 2500√ó2000 px) |
| BR-038 | Accepted formats: JPEG and PNG only |
| BR-039 | Maximum file size: 50 MB per upload |
| BR-040 | Daily upload limit: 10 photos per day |
| BR-041 | Uploading grants Unsplash royalty-free, irrevocable license |
| BR-042 | Contributor must own rights or have permission |
| BR-043 | Photos must not contain nudity, violence, hate, PII without consent, copyrighted logos |
| BR-044 | Photos with identifiable people require valid model release |
| BR-045 | Non-compliant photos rejected with explanatory email |
| BR-046 | Uploaded photo appears with status "Under Review" until approved |
| BR-047 | Contributors can add description, alt text, and location |
| BR-048 | Contributors can add up to 30 tags per photo |

#### User Flows Detected

Total: **3 flows**

1. Happy Path ‚Äî Photo Upload (9 steps)
2. Alternative Flow ‚Äî Admin Approval (3 steps)
3. Alternative Flow ‚Äî Admin Rejection (3 steps)

#### Risk Areas Flagged

| Risk Category | Detected? | Evidence |
|---|---|---|
| Authentication / Auth | **Yes** | Only registered users can upload; guest redirect to login |
| Input Validation | **Yes** | File format, size limit, resolution, tag count, tag length |
| File Upload | **Yes** | JPEG/PNG only, 50 MB max, 5 MP minimum |
| Payment Processing | No | ‚Äî |
| External API / Service | No | ‚Äî |
| PII / Sensitive Data | **Yes** | BR-043: photos with PII require consent |
| Rate Limiting | **Yes** | 10 photos per day limit |
| Permissions / Roles | **Yes** | Guest vs. Registered User |

#### Spec Quality Assessment
- **Confidence: High**
- Has user flow: Yes
- Has business rules: Yes
- Has validation conditions: Yes
- Missing elements: Admin review workflow (approval/rejection timing not specified)

#### Coverage Recommendation
- **Recommended: `full`** ‚Äî File upload, auth gate, daily rate limit, and file type security are all high-risk areas

#### Estimated Output
- Estimated TC count: ~30 TCs
- Traceability matrix: included

#### Spec Gaps Detected

| Gap Type | Detected? | Impact |
|---|---|---|
| No failure/error scenarios | Partial | Mid-upload failure noted in edge cases |
| No boundary conditions in rules | No | ‚Äî |
| Vague expected behavior | Partial | Admin review timeline not specified; TC-016/TC-017 marked needs_review |
| External dependency unspecified | No | ‚Äî |
| No roles or permissions defined | No | ‚Äî |
| Contradictory rules | No | ‚Äî |
| Only happy path described | No | ‚Äî |

---

## Test Cases ‚Äî Photo Upload (Contributors)

### üü¢ Happy Path

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-001 | Authenticated user uploads valid JPEG photo successfully | Happy Path | P1 - Critical | BR-036, BR-037, BR-038, BR-039, BR-046, BR-047 | User contributor@test.com is logged in. Daily upload count = 0. /submit is open. | photo_file: valid_photo.jpg (JPEG, 10 MB, 3000√ó2500 px = 7.5 MP) / description: "Mountain sunset view" / alt_text: "Sunset over mountain peaks" / location: "Rocky Mountains, CO" | 1. Navigate to https://unsplash.com/submit 2. Click "Choose file" and select valid_photo.jpg 3. System shows preview 4. Enter description: Mountain sunset view 5. Enter alt_text: Sunset over mountain peaks 6. Enter location: Rocky Mountains, CO 7. Click "Submit" | Photo uploaded successfully. Status set to "Under Review" on contributor's profile. Confirmation notification displayed/sent. |
| TC-002 | Authenticated user uploads valid PNG photo successfully | Happy Path | P1 - Critical | BR-036, BR-037, BR-038, BR-039 | User contributor@test.com is logged in. Daily count = 0. /submit is open. | photo_file: valid_photo.png (PNG, 20 MB, 2600√ó2100 px = 5.46 MP) | 1. Navigate to /submit 2. Select valid_photo.png 3. System shows preview 4. Click "Submit" | Photo uploaded with status "Under Review". No error shown. |
| TC-003 | Contributor adds up to 30 tags to uploaded photo | Happy Path | P2 - High | BR-048 | User contributor@test.com is logged in. Valid photo ready for upload. | photo_file: valid_photo.jpg / tags: 30 unique tags (e.g., nature, mountain, sunset, ... [30 tags]) | 1. Select valid photo file 2. In tags field, add 30 unique tags 3. Click "Submit" | Upload succeeds. All 30 tags saved to the photo. Status: "Under Review". |
| TC-004 | Unauthenticated user accessing /submit is redirected to /login | Happy Path | P1 - Critical | BR-036 | No active session. | URL: https://unsplash.com/submit | 1. Without logging in, navigate directly to https://unsplash.com/submit | User is redirected to /login (or /join). Cannot access the upload form. |

### üî¥ Negative

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-005 | Upload rejected for non-JPEG/PNG format (GIF) | Negative | P1 - Critical | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: animated.gif | 1. Navigate to /submit 2. Select animated.gif 3. Attempt to submit | Upload fails. Error: "Only JPEG and PNG files are accepted". File is not uploaded. |
| TC-006 | Upload rejected for non-JPEG/PNG format (WEBP) | Negative | P1 - Critical | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: image.webp | 1. Navigate to /submit 2. Select image.webp 3. Attempt to submit | Upload fails. Error: "Only JPEG and PNG files are accepted". |
| TC-007 | Upload rejected when file size exceeds 50 MB | Negative | P1 - Critical | BR-039 | contributor@test.com is logged in. /submit is open. | photo_file: large_photo.jpg (55 MB, valid JPEG, sufficient resolution) | 1. Navigate to /submit 2. Select large_photo.jpg (55 MB) 3. Attempt to submit | Upload fails. Error: "File size exceeds the 50 MB limit". File is not uploaded. |
| TC-008 | Upload rejected when resolution is below 5 megapixels | Negative | P1 - Critical | BR-037 | contributor@test.com is logged in. /submit is open. | photo_file: lowres.jpg (JPEG, 5 MB, 2000√ó1500 px = 3 MP) | 1. Navigate to /submit 2. Select lowres.jpg 3. Attempt to submit | Upload fails. Error: "Image resolution must be at least 5 megapixels (2500 √ó 2000 px minimum)". |
| TC-009 | Upload blocked when daily limit of 10 photos is reached | Negative | P1 - Critical | BR-040 | contributor@test.com is logged in. Daily upload count = 10. /submit is open. | photo_file: valid_photo.jpg (11th upload attempt) | 1. Navigate to /submit 2. Select valid_photo.jpg 3. Attempt to submit | Upload blocked. Error: "You've reached your daily upload limit of 10 photos". No upload occurs. |
| TC-010 | Upload rejected for 31 tags (exceeds maximum) | Negative | P2 - High | BR-048 | contributor@test.com is logged in. Valid photo selected. | tags: 31 unique tags | 1. Select valid photo 2. Add 31 tags to the tags field 3. Click "Submit" | Upload fails or 31st tag is rejected. Error: "Maximum 30 tags allowed". |
| TC-011 | Upload rejected for tag longer than 50 characters | Negative | P2 - High | BR-048 | contributor@test.com is logged in. Valid photo selected. | tag: "thistagislongerthanfiftycharacterslongandshouldfail" (51 chars) | 1. Select valid photo 2. Add tag: "thistagislongerthanfiftycharacterslongandshouldfail" 3. Click "Submit" | Upload fails or tag is rejected. Error: "Tag cannot exceed 50 characters". |

### üü° Edge Cases

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-012 | JPEG file with .png extension is accepted (MIME-type validation) | Edge Case | P2 - High | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: valid_photo.jpg renamed to valid_photo.png (still JPEG MIME type) | 1. Navigate to /submit 2. Select the renamed file (valid_photo.png with JPEG content) 3. Submit | File is accepted based on actual MIME type (JPEG). No rejection. Upload proceeds normally. |
| TC-013 | HEIC file is rejected regardless of extension | Edge Case | P2 - High | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: iphone_photo.heic | 1. Navigate to /submit 2. Select iphone_photo.heic 3. Attempt to submit | Upload fails. Error: "Only JPEG and PNG files are accepted". |
| TC-014 | File at exactly 50 MB is accepted | Edge Case | P2 - High | BR-039 | contributor@test.com is logged in. /submit is open. | photo_file: exactly_50mb.jpg (50.00 MB, JPEG, 3000√ó2000 px) | 1. Navigate to /submit 2. Select exactly_50mb.jpg 3. Submit | Upload succeeds. No file size error. Status set to "Under Review". |
| TC-015 | File at 50.01 MB is rejected | Edge Case | P2 - High | BR-039 | contributor@test.com is logged in. /submit is open. | photo_file: just_over_50mb.jpg (50.01 MB, JPEG) | 1. Navigate to /submit 2. Select just_over_50mb.jpg 3. Attempt to submit | Upload fails. Error: "File size exceeds the 50 MB limit". |
| TC-016 | Resolution at exactly 5 megapixels (2500√ó2000) is accepted | Edge Case | P2 - High | BR-037 | contributor@test.com is logged in. /submit is open. | photo_file: min_res.jpg (JPEG, 10 MB, 2500√ó2000 px = exactly 5 MP) | 1. Navigate to /submit 2. Select min_res.jpg 3. Submit | Upload succeeds. No resolution error. Status: "Under Review". |
| TC-017 | Resolution at 4.9 megapixels (e.g., 2490√ó1967) is rejected | Edge Case | P2 - High | BR-037 | contributor@test.com is logged in. /submit is open. | photo_file: below_5mp.jpg (2490√ó1967 px = ~4.89 MP) | 1. Navigate to /submit 2. Select below_5mp.jpg 3. Attempt to submit | Upload fails. Error: "Image resolution must be at least 5 megapixels". |
| TC-018 | Duplicate tag in same upload is de-duplicated | Edge Case | P3 - Medium | BR-048 | contributor@test.com is logged in. Valid photo selected. | tags: ["sunset", "nature", "sunset"] (duplicate "sunset") | 1. Select valid photo 2. Add tags: sunset, nature, sunset 3. Submit | System de-duplicates tags silently, OR shows error for duplicate. Final tag count = 2. No crash. |
| TC-019 | Upload interrupted mid-stream shows error and does not save partial file | Edge Case | P2 - High | BR-039 | contributor@test.com is logged in. Network can be interrupted. | photo_file: valid_photo.jpg (20 MB) ‚Äî interrupt upload at ~50% | 1. Begin upload of valid_photo.jpg 2. Interrupt network connection mid-upload | Error displayed to user. Partial upload is discarded. Photo does not appear on contributor's profile. User can retry. |
| TC-020 | 10th photo upload (exactly at daily limit) succeeds | Edge Case | P2 - High | BR-040 | contributor@test.com is logged in. Daily count = 9. | photo_file: valid_photo.jpg (10th upload) | 1. Navigate to /submit 2. Select valid_photo.jpg 3. Submit | Upload succeeds. Status: "Under Review". Count now = 10. |

### üîí Security

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-021 | Guest cannot access /submit route directly | Security | P1 - Critical | BR-036 | No active session. | URL: https://unsplash.com/submit | 1. Without a session, navigate to https://unsplash.com/submit | Redirect to /login or /join. Upload form is NOT displayed. |
| TC-022 | File upload with malicious filename (path traversal) is sanitized | Security | P1 - Critical | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: filename "../../etc/passwd.jpg" (valid JPEG content, path traversal name) | 1. Navigate to /submit 2. Upload a valid JPEG with filename: ../../etc/passwd.jpg 3. Submit | File is accepted and stored (if valid JPEG). Filename is sanitized/stripped of path separators. Server does not write to /etc/passwd. Stored filename is safe. |
| TC-023 | Polyglot file (valid JPEG + embedded script) does not execute server-side | Security | P1 - Critical | BR-038 | contributor@test.com is logged in. /submit is open. | photo_file: polyglot.jpg (valid JPEG with PHP/script appended in EXIF or end of file) | 1. Upload a JPEG file with embedded script payload in EXIF data 2. After upload, attempt to access the uploaded file URL and trigger script execution | Server stores file as a static asset. Embedded script is NOT executed. File is served with correct Content-Type: image/jpeg header. No server-side code execution. |
| TC-024 | XSS payload in description field is not executed on profile page | Security | P1 - Critical | BR-047 | contributor@test.com is logged in. /submit is open. | description: `<script>alert('XSS')</script>` | 1. Navigate to /submit 2. Upload a valid photo 3. Enter description: `<script>alert('XSS')</script>` 4. Submit 5. Navigate to contributor's profile page where the photo appears | No JavaScript alert triggered. Description displayed as plain text (HTML-escaped) on profile page. |
| TC-025 | XSS payload in tags field is not executed | Security | P1 - Critical | BR-048 | contributor@test.com is logged in. /submit is open. | tag: `<img src=x onerror=alert('xss')>` | 1. Upload valid photo 2. Add tag: `<img src=x onerror=alert('xss')>` 3. Submit 4. Navigate to the photo page | No JavaScript alert triggered. Tag content is HTML-escaped and displayed safely. |
| TC-026 | Daily limit cannot be bypassed by parallel upload requests | Security | P1 - Critical | BR-040 | contributor@test.com is logged in. Daily upload count = 9. | 2 concurrent upload requests submitted simultaneously to exceed limit | 1. Prepare 2 valid photo files 2. Send both upload requests concurrently (e.g., via 2 tabs or API) with daily count = 9 | At most 1 additional upload is accepted (reaching limit of 10). Second upload is blocked with daily limit error. Race condition does not allow > 10 uploads. |
| TC-027 | Unauthorized user cannot submit upload via API with valid photo | Security | P1 - Critical | BR-036 | API request available. No valid auth token. | POST request to upload endpoint with valid JPEG data and no/invalid auth header | 1. Send POST request to upload endpoint with valid JPEG and no auth token 2. Observe response | Server returns 401 Unauthorized. Upload is not processed. No file stored on server. |

---

## Traceability Matrix

| Rule ID | Rule Description | Covered By | Status |
|---|---|---|---|
| BR-036 | Only registered users can upload | TC-004, TC-021, TC-027 | ‚úÖ Covered |
| BR-037 | Min resolution: 5 megapixels | TC-001, TC-008, TC-016, TC-017 | ‚úÖ Covered |
| BR-038 | Accepted: JPEG and PNG only | TC-001, TC-002, TC-005, TC-006, TC-012, TC-013, TC-022, TC-023 | ‚úÖ Covered |
| BR-039 | Max file size: 50 MB | TC-001, TC-007, TC-014, TC-015, TC-019 | ‚úÖ Covered |
| BR-040 | Daily limit: 10 photos | TC-009, TC-020, TC-026 | ‚úÖ Covered |
| BR-041 | Uploading grants royalty-free license | ‚Äî | ‚ö†Ô∏è Policy/legal rule ‚Äî not testable via UI |
| BR-042 | Must own rights or have permission | ‚Äî | ‚ö†Ô∏è Policy/legal rule ‚Äî not testable via UI |
| BR-043 | No nudity, violence, hate, PII, copyrighted logos | ‚Äî | ‚ö†Ô∏è Content moderation ‚Äî requires admin review; not UI-testable |
| BR-044 | Model release required for identifiable people | ‚Äî | ‚ö†Ô∏è Content moderation policy ‚Äî not UI-testable |
| BR-045 | Non-compliant photos rejected with email | ‚Äî | ‚ö†Ô∏è Admin workflow ‚Äî not directly UI-testable in normal test run |
| BR-046 | Status "Under Review" on upload | TC-001, TC-002, TC-003 | ‚úÖ Covered |
| BR-047 | Contributor can add description, alt text, location | TC-001, TC-024 | ‚úÖ Covered |
| BR-048 | Up to 30 tags per photo | TC-003, TC-010, TC-011, TC-018, TC-025 | ‚úÖ Covered |

### Coverage Gaps ‚Äî BR-041 through BR-045

```
‚ö†Ô∏è COVERAGE GAP: BR-041, BR-042, BR-043, BR-044, BR-045

Gap type: Policy / Legal / Content Moderation rules
Affected TC types: All
Impact: These rules are enforced through legal terms acceptance (ToS) and admin
        review workflows, not system-level input validation. No automated or
        manual UI test can verify rights ownership, content moderation decisions,
        or model release validity.

Action: Reference ToS acceptance TC from Feature 4 (TC-007). For moderation,
        add admin review workflow to spec with testable acceptance criteria.
```

---

## Coverage Summary

| Type | Count |
|---|---|
| üü¢ Happy Path | 4 |
| üî¥ Negative | 7 |
| üü° Edge Case | 9 |
| üîí Security | 7 |
| **Total** | **27** |

**Rule Coverage:** 8 / 13 rules = **61.5%**
**Uncovered:** BR-041, BR-042, BR-043, BR-044, BR-045 ‚Äî policy/legal/moderation rules, not testable via UI

---

## Test Execution Report

```
Feature:      Photo Upload (Contributors)
Source Spec:  SPEC_UNSPLASH.md ‚Äî Feature 5
Tester:       ___________
Date:         ___________
Environment:  ___________
Build/Version:___________

| Total TCs | Pass | Fail | Blocked | Not Run |
|-----------|------|------|---------|---------|
|    27     |      |      |         |         |

Defects Found:
| Bug ID | TC ID | Rule Ref | Description | Severity | Status |
|--------|-------|----------|-------------|----------|--------|
|        |       |          |             |          |        |

Sign-off:
[ ] QC Lead Review: ___________
[ ] Security Review (if applicable): ___________
[ ] Ready for Release
```
