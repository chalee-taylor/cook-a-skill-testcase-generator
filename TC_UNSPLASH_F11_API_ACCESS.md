# TC_UNSPLASH_F11_API_ACCESS.md ‚Äî Test Cases: API Access (Developers)

**Generated by:** Test Case Generator Skill v1.1.0
**Source Spec:** SPEC_UNSPLASH.md ‚Äî Feature 11
**Feature:** API Access (Developers)
**Coverage Level:** full
**Enable Security:** true
**Generated At:** 2026-02-27
**Output Format:** markdown

---

## Pre-run Report

### Step 0 ‚Äî PII Masking

Scanned spec for PII patterns. API keys/tokens mentioned are synthetic placeholders. No real PII found.

**PII Masking Report:** Fields redacted: 0

---

### Intelligence Scan Report ‚Äî API Access (Developers)

#### Feature Identified
- **Type:** REST API + Developer Registration + Rate Limiting
- **Name:** API Access (Developers)
- **Language:** English

#### Business Rules Extracted

Total: **11 rules**

| ID | Rule Summary |
|---|---|
| BR-098 | Developers must register a free Unsplash developer account to use the API |
| BR-099 | New apps start in Demo mode: 50 requests per hour |
| BR-100 | Production API access requires application review and approval |
| BR-101 | Production rate limit: up to 5,000 requests per hour |
| BR-102 | API list endpoints: 10 items/page default; max 30 per page |
| BR-103 | API calls must include Authorization: Client-ID {ACCESS_KEY} header |
| BR-104 | Unauthenticated API calls return HTTP 401 Unauthorized |
| BR-105 | Rate-limited calls return HTTP 429 with header X-Ratelimit-Remaining: 0 |
| BR-106 | Apps must display attribution "Photo by [Name] on Unsplash" |
| BR-107 | Apps must call Unsplash download endpoint when user downloads/uses a photo |
| BR-108 | API terms violations may result in key revocation without notice |

#### User Flows Detected

Total: **3 flows**

1. Happy Path ‚Äî API App Registration (6 steps)
2. Happy Path ‚Äî API Photo Search (5 steps)
3. Alternative Flow ‚Äî Rate Limit Exceeded (3 steps)

#### Risk Areas Flagged

| Risk Category | Detected? | Evidence |
|---|---|---|
| Authentication / Auth | **Yes** | Client-ID auth header required; 401 on missing/invalid key |
| Input Validation | **Yes** | per_page (1‚Äì30), page (‚â•1), app_name (3‚Äì100 chars), description (20‚Äì500 chars) |
| File Upload | No | ‚Äî |
| Payment Processing | No | ‚Äî |
| External API / Service | No | ‚Äî |
| PII / Sensitive Data | **Yes** | Access Key and Secret Key issued and must be kept secure |
| Rate Limiting | **Yes** | 50 req/hr Demo, 5,000 req/hr Production; HTTP 429 on exceed |
| Permissions / Roles | **Yes** | Demo vs. Production app; revoked key returns 403 |

#### Spec Quality Assessment
- **Confidence: High**
- Has user flow: Yes
- Has business rules: Yes
- Has validation conditions: Yes
- Missing elements: BR-106 (attribution) and BR-107 (download trigger) are policy rules enforced through ToS, not API-level validation

#### Coverage Recommendation
- **Recommended: `full`** ‚Äî Rate limiting, API key security, injection in query params, and IDOR risk on API

#### Estimated Output
- Estimated TC count: ~28 TCs
- Traceability matrix: included

#### Spec Gaps Detected

| Gap Type | Detected? | Impact |
|---|---|---|
| No failure/error scenarios | No | ‚Äî |
| No boundary conditions in rules | No | ‚Äî |
| Vague expected behavior | Partial | BR-106, BR-107: attribution and download trigger are policy-based, not API-enforced |
| External dependency unspecified | No | ‚Äî |
| No roles or permissions defined | No | ‚Äî |
| Contradictory rules | No | ‚Äî |
| Only happy path described | No | ‚Äî |

---

## Test Cases ‚Äî API Access (Developers)

### üü¢ Happy Path

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-001 | Registered developer creates new API application | Happy Path | P1 - Critical | BR-098, BR-099 | Developer dev@test.com is logged in. https://unsplash.com/developers is open. | app_name: "My Test App" / description: "Testing Unsplash API integration for personal portfolio site" / redirect_uris: http://localhost:3000 / api_terms_accepted: true | 1. Navigate to https://unsplash.com/developers 2. Click "Register as a developer" (logged in) 3. Click "New Application" 4. Enter app_name: My Test App 5. Enter description: Testing Unsplash API integration for personal portfolio site 6. Add redirect URI: http://localhost:3000 7. Check "I agree to the API Terms" 8. Click "Create application" | Application created. Access Key and Secret Key displayed. App starts in Demo mode with rate limit: 50 requests/hour. |
| TC-002 | Developer sends valid API photo search request ‚Äî receives HTTP 200 with results | Happy Path | P1 - Critical | BR-099, BR-102, BR-103 | App "My Test App" registered in Demo mode. Access Key: DEMO_ACCESS_KEY. | GET /search/photos?query=mountain&page=1&per_page=10 with header Authorization: Client-ID DEMO_ACCESS_KEY | 1. Send: GET https://api.unsplash.com/search/photos?query=mountain&page=1&per_page=10 2. Include header: Authorization: Client-ID DEMO_ACCESS_KEY | HTTP 200 response. JSON body includes: results array (‚â§10 photos), total count, total_pages. Each photo object includes id, urls, user info. X-Ratelimit-Remaining header present. |
| TC-003 | API returns 10 results by default (no per_page specified) | Happy Path | P2 - High | BR-102 | Valid Access Key available. | GET /search/photos?query=sunset (no per_page param) | 1. Send: GET /search/photos?query=sunset with valid auth 2. Check result count | HTTP 200. Results array contains exactly 10 items (default). |
| TC-004 | API returns 30 results when per_page=30 is specified | Happy Path | P2 - High | BR-102 | Valid Access Key available. | GET /search/photos?query=sunset&per_page=30 | 1. Send: GET /search/photos?query=sunset&per_page=30 with valid auth | HTTP 200. Results array contains up to 30 items. |
| TC-005 | 50th request in Demo mode succeeds ‚Äî X-Ratelimit-Remaining: 0 returned | Happy Path | P1 - Critical | BR-099, BR-105 | Demo app. 49 requests made in current hour. | 50th GET /search/photos request | 1. Send the 50th API request within the current hour | HTTP 200. Response header: X-Ratelimit-Remaining: 0. Request succeeds. |

### üî¥ Negative

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-006 | API request without Authorization header returns HTTP 401 | Negative | P1 - Critical | BR-103, BR-104 | No auth header. | GET /search/photos?query=mountain (no auth header) | 1. Send GET request to search endpoint with no Authorization header | HTTP 401 Unauthorized. Response body contains error message. No photo data returned. |
| TC-007 | API request with empty Access Key returns HTTP 401 | Negative | P1 - Critical | BR-103, BR-104 | No valid key. | Authorization: Client-ID (empty key) | 1. Send request with header: Authorization: Client-ID 2. No key value after Client-ID | HTTP 401 Unauthorized. |
| TC-008 | API request with revoked Access Key returns HTTP 403 | Negative | P1 - Critical | BR-108 | App "BadApp" has had its API key revoked for ToS violation. | Authorization: Client-ID REVOKED_ACCESS_KEY | 1. Send request with the revoked key | HTTP 403 Forbidden. No photo data returned. |
| TC-009 | 51st request in Demo mode returns HTTP 429 | Negative | P1 - Critical | BR-099, BR-105 | Demo app. 50 requests made in current hour (limit reached). | 51st GET request in same hour | 1. Send 51st API request within same hourly window | HTTP 429 Too Many Requests. Response header: X-Ratelimit-Remaining: 0. No photo data returned. Must wait for next hourly window. |
| TC-010 | per_page=0 returns HTTP 400 | Negative | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=mountain&per_page=0 | 1. Send request with per_page=0 | HTTP 400 Bad Request. Error indicating per_page must be between 1 and 30. |
| TC-011 | per_page=31 returns HTTP 400 | Negative | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=mountain&per_page=31 | 1. Send request with per_page=31 | HTTP 400 Bad Request. Error indicating per_page must not exceed 30. |
| TC-012 | page=-1 returns HTTP 400 | Negative | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=mountain&page=-1 | 1. Send request with page=-1 | HTTP 400 Bad Request. Error indicating page must be ‚â• 1. |
| TC-013 | App registration rejected when description is below 20 characters | Negative | P2 - High | BR-098 | Developer is logged in. New Application form is open. | description: "API test" (9 chars) | 1. Fill in app registration form 2. Enter description: API test (9 chars) 3. Click "Create application" | Registration fails. Inline error: description must be at least 20 characters. |
| TC-014 | App registration rejected when app_name is below 3 characters | Negative | P2 - High | BR-098 | Developer is logged in. New Application form is open. | app_name: "AB" (2 chars) | 1. Fill app registration form 2. Enter app_name: AB 3. Click "Create application" | Registration fails. Error: app_name must be at least 3 characters. |
| TC-015 | App registration rejected for invalid redirect URI | Negative | P2 - High | BR-098 | Developer is logged in. New Application form is open. | redirect_uri: "not-a-url" | 1. Enter redirect_uri: not-a-url 2. Click "Create application" | Registration fails. Error: "Invalid URL format" for redirect URI. |

### üü° Edge Cases

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-016 | per_page=1 (minimum) returns exactly 1 result | Edge Case | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=mountain&per_page=1 | 1. Send request with per_page=1 | HTTP 200. Results array contains exactly 1 item. |
| TC-017 | per_page=30 (maximum) returns up to 30 results | Edge Case | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=nature&per_page=30 | 1. Send request with per_page=30 | HTTP 200. Results array contains up to 30 items (may be fewer if total results < 30). |
| TC-018 | page=1 (minimum valid page) returns first page | Edge Case | P2 - High | BR-102 | Valid Access Key. | GET /search/photos?query=sunset&page=1 | 1. Send request with page=1 | HTTP 200. First page of results returned. |
| TC-019 | Localhost redirect URI is accepted during development | Edge Case | P2 - High | BR-098 | Developer is logged in. New Application form open. | redirect_uri: http://localhost:3000 | 1. Enter redirect_uri: http://localhost:3000 2. Create application | Application created successfully. localhost is accepted as a valid redirect URI for development apps. |
| TC-020 | Description at exactly 20 characters (minimum) is accepted | Edge Case | P2 - High | BR-098 | Developer is logged in. Form open. | description: "API test for portfo" (20 chars) | 1. Enter exactly 20-char description 2. Create application | Application created. No description length error. |
| TC-021 | Description at exactly 500 characters (maximum) is accepted | Edge Case | P2 - High | BR-098 | Developer is logged in. Form open. | description: exactly 500 chars | 1. Enter exactly 500-char description 2. Create application | Application created. No description length error. |
| TC-022 | Rate limit resets at the start of next hourly window | Edge Case | P1 - Critical | BR-099, BR-105 | Demo app. 50th request just made (limit reached). | Wait for next hourly window (or simulate) | 1. Make 50th request (rate limit hit) 2. Wait until next hourly window begins 3. Send new request | HTTP 200. X-Ratelimit-Remaining shows 49. Rate limit counter reset for new hourly window. |
| TC-023 | Production app exceeding 5,000 req/hr returns HTTP 429 | Edge Case | P1 - Critical | BR-101, BR-105 | Production-approved app. 5,000 requests made in current hour. | 5,001st request in same hour | 1. Send 5,001st request in same hourly window | HTTP 429. X-Ratelimit-Remaining: 0. Auto-reset at next hourly window. |

### üîí Security

| ID | Title | Type | Priority | Rule Ref | Precondition | Test Data | Steps | Expected Result |
|---|---|---|---|---|---|---|---|---|
| TC-024 | SQL injection in query parameter does not expose DB errors | Security | P1 - Critical | BR-103 | Valid Access Key. | query: `' OR '1'='1'--` | 1. Send: GET /search/photos?query=' OR '1'='1'-- with valid auth | HTTP 200 with 0 or unrelated results, OR HTTP 400. No SQL error, stack trace, or DB schema exposed. System continues functioning. |
| TC-025 | XSS payload in query parameter is not reflected in response | Security | P1 - Critical | BR-103 | Valid Access Key. | query: `<script>alert('XSS')</script>` | 1. Send API request with query containing XSS payload | JSON response. XSS payload treated as search text. Response is JSON (not HTML). No script execution possible via API response. |
| TC-026 | Access Key transmitted in header, not in URL | Security | P2 - High | BR-103 | Developer using API. | Authorization: Client-ID DEMO_ACCESS_KEY | 1. Review API request format in documentation and implementation 2. Confirm key is sent in Authorization header, not as query param | Access Key is ONLY in the Authorization header. Key NOT present in URL path or query string. No risk of key exposure in server logs that log URLs. |
| TC-027 | Rate limiting cannot be bypassed by rotating Access Keys | Security | P1 - Critical | BR-099, BR-105 | Demo app. Multiple apps registered by same developer. | Multiple Access Keys from different app registrations | 1. Create 2 demo apps (each with 50 req/hr limit) 2. Alternate between keys to try to exceed 50 req/hr per developer account | System enforces rate limiting per-key (and/or per-account). Rotating keys does not bypass the per-key rate limit. Both keys may each have their own 50 req/hr. [VERIFY: confirm if rate limit is per-key or per-account] |
| TC-028 | Secret Key is not exposed in API responses | Security | P1 - Critical | BR-098 | Developer registered app. Secret Key issued. | ‚Äî | 1. Register a new application 2. Review all subsequent API responses 3. Check if Secret Key appears in any response payload | Secret Key is only shown once (at app creation). It does NOT appear in any subsequent API response, profile, or settings page. Treat as a one-time credential. |

---

## Traceability Matrix

| Rule ID | Rule Description | Covered By | Status |
|---|---|---|---|
| BR-098 | Must register developer account | TC-001, TC-013, TC-014, TC-015, TC-019, TC-020, TC-021, TC-028 | ‚úÖ Covered |
| BR-099 | Demo mode: 50 req/hr | TC-001, TC-005, TC-009, TC-022, TC-027 | ‚úÖ Covered |
| BR-100 | Production requires review and approval | TC-023 | ‚úÖ Covered |
| BR-101 | Production: 5,000 req/hr | TC-023 | ‚úÖ Covered |
| BR-102 | 10 items/page default; max 30 per page | TC-002, TC-003, TC-004, TC-010, TC-011, TC-012, TC-016, TC-017, TC-018 | ‚úÖ Covered |
| BR-103 | Authorization: Client-ID {ACCESS_KEY} required | TC-002, TC-006, TC-007, TC-024, TC-025, TC-026 | ‚úÖ Covered |
| BR-104 | 401 on unauthenticated requests | TC-006, TC-007 | ‚úÖ Covered |
| BR-105 | 429 + X-Ratelimit-Remaining: 0 on rate limit | TC-005, TC-009, TC-022, TC-023 | ‚úÖ Covered |
| BR-106 | Apps must show attribution | ‚Äî | ‚ö†Ô∏è Policy rule ‚Äî enforced via ToS, not API validation |
| BR-107 | Apps must call download endpoint | ‚Äî | ‚ö†Ô∏è Policy rule ‚Äî enforced via ToS, not API validation |
| BR-108 | API terms violation ‚Üí key revocation | TC-008 | ‚úÖ Covered |

### Coverage Gaps ‚Äî BR-106, BR-107

```
‚ö†Ô∏è COVERAGE GAP: BR-106, BR-107

Gap type: Policy / ToS rules (attribution and download trigger)
Affected TC types: All
Impact: These rules are behavioral requirements for applications using the API,
        enforced through API Terms of Service and periodic audits ‚Äî not via
        API-level validation or HTTP error codes. No automated API test can
        verify if a third-party app is displaying correct attribution.

Action: Reference ToS acceptance TC from Feature 4 (BR-035). Add audit workflow
        to spec describing how Unsplash verifies attribution compliance in
        registered applications.
```

---

## Coverage Summary

| Type | Count |
|---|---|
| üü¢ Happy Path | 5 |
| üî¥ Negative | 10 |
| üü° Edge Case | 8 |
| üîí Security | 5 |
| **Total** | **28** |

**Rule Coverage:** 9 / 11 rules = **81.8%**
**Uncovered:** BR-106, BR-107 ‚Äî policy/ToS rules, not testable via API calls

---

## Test Execution Report

```
Feature:      API Access (Developers)
Source Spec:  SPEC_UNSPLASH.md ‚Äî Feature 11
Tester:       ___________
Date:         ___________
Environment:  ___________
Build/Version:___________

| Total TCs | Pass | Fail | Blocked | Not Run |
|-----------|------|------|---------|---------|
|    28     |      |      |         |         |

Defects Found:
| Bug ID | TC ID | Rule Ref | Description | Severity | Status |
|--------|-------|----------|-------------|----------|--------|
|        |       |          |             |          |        |

Sign-off:
[ ] QC Lead Review: ___________
[ ] Security Review (if applicable): ___________
[ ] Ready for Release
```
